import networkx as nx
import matplotlib.pyplot as plt
from collections import deque

# ============================================================
# –ó–ê–í–î–ê–ù–ù–Ø 1: –°—Ç–≤–æ—Ä–µ–Ω–Ω—è —Ç–∞ –∞–Ω–∞–ª—ñ–∑ –≥—Ä–∞—Ñ–∞
# ============================================================

print("=" * 70)
print("–ó–ê–í–î–ê–ù–ù–Ø 1: –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –≥—Ä–∞—Ñ–∞ —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–Ω–æ—ó –º–µ—Ä–µ–∂—ñ –≤ —É—è–≤–Ω—ñ–π —ñ–≥—Ä—ñ RPG World")
print("=" * 70)

# –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –≥—Ä–∞—Ñ–∞
G = nx.Graph()

# –õ–æ–∫–∞—Ü—ñ—ó –ø–æ –∫—Ä–∞—ó–Ω–∞—Ö
ukraine = ["–ö–∏—ó–≤", "–õ—å–≤—ñ–≤", "–û–¥–µ—Å–∞", "–•–∞—Ä–∫—ñ–≤"]
france = ["–ü–∞—Ä–∏–∂", "–ú–∞—Ä—Å–µ–ª—å", "–õ—ñ–æ–Ω"]
england = ["–õ–æ–Ω–¥–æ–Ω", "–ú–∞–Ω—á–µ—Å—Ç–µ—Ä", "–õ—ñ–≤–µ—Ä–ø—É–ª—å"]
usa = ["–ù—å—é-–ô–æ—Ä–∫", "–õ–æ—Å-–ê–Ω–¥–∂–µ–ª–µ—Å", "–ß–∏–∫–∞–≥–æ"]

# –î–æ–¥–∞—î–º–æ –≤—Å—ñ –≤–µ—Ä—à–∏–Ω–∏
all_locations = ukraine + france + england + usa
G.add_nodes_from(all_locations)

# –ú–∞—Å—à—Ç–∞–±–æ–≤–∞–Ω—ñ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∏ –¥–ª—è –≤—ñ–∑—É–∞–ª—ñ–∑–∞—Ü—ñ—ó
scaled_coordinates = {
    "–õ–æ—Å-–ê–Ω–¥–∂–µ–ª–µ—Å": (5, 15), "–ß–∏–∫–∞–≥–æ": (25, 25), "–ù—å—é-–ô–æ—Ä–∫": (35, 22),
    "–õ—ñ–≤–µ—Ä–ø—É–ª—å": (50, 30), "–ú–∞–Ω—á–µ—Å—Ç–µ—Ä": (52, 28), "–õ–æ–Ω–¥–æ–Ω": (55, 22),
    "–ü–∞—Ä–∏–∂": (65, 25), "–õ—ñ–æ–Ω": (70, 20), "–ú–∞—Ä—Å–µ–ª—å": (72, 12),
    "–õ—å–≤—ñ–≤": (85, 25), "–ö–∏—ó–≤": (95, 27), "–•–∞—Ä–∫—ñ–≤": (105, 26), "–û–¥–µ—Å–∞": (97, 15)
}

# –í–Ω—É—Ç—Ä—ñ—à–Ω—ñ –¥–æ—Ä–æ–≥–∏ –∑ –≤–∞–≥–∞–º–∏ (—Ä–µ–∞–ª—å–Ω–∏–π —á–∞—Å –∞–≤—Ç–æ–º–æ–±—ñ–ª–µ–º —É –≥–æ–¥–∏–Ω–∞—Ö)
ukraine_roads = [
    ("–ö–∏—ó–≤", "–õ—å–≤—ñ–≤", 7), ("–ö–∏—ó–≤", "–•–∞—Ä–∫—ñ–≤", 6), ("–ö–∏—ó–≤", "–û–¥–µ—Å–∞", 6),
    ("–õ—å–≤—ñ–≤", "–û–¥–µ—Å–∞", 10), ("–•–∞—Ä–∫—ñ–≤", "–û–¥–µ—Å–∞", 9)
]

france_roads = [
    ("–ü–∞—Ä–∏–∂", "–õ—ñ–æ–Ω", 5), ("–ü–∞—Ä–∏–∂", "–ú–∞—Ä—Å–µ–ª—å", 8), ("–õ—ñ–æ–Ω", "–ú–∞—Ä—Å–µ–ª—å", 3)
]

england_roads = [
    ("–õ–æ–Ω–¥–æ–Ω", "–ú–∞–Ω—á–µ—Å—Ç–µ—Ä", 4), ("–õ–æ–Ω–¥–æ–Ω", "–õ—ñ–≤–µ—Ä–ø—É–ª—å", 4), ("–ú–∞–Ω—á–µ—Å—Ç–µ—Ä", "–õ—ñ–≤–µ—Ä–ø—É–ª—å", 1)
]

usa_roads = [
    ("–ù—å—é-–ô–æ—Ä–∫", "–ß–∏–∫–∞–≥–æ", 12), ("–ß–∏–∫–∞–≥–æ", "–õ–æ—Å-–ê–Ω–¥–∂–µ–ª–µ—Å", 4), ("–ù—å—é-–ô–æ—Ä–∫", "–õ–æ—Å-–ê–Ω–¥–∂–µ–ª–µ—Å", 5)
]

# –ú—ñ–∂–Ω–∞—Ä–æ–¥–Ω—ñ —Ä–µ–π—Å–∏ (—á–∞—Å –ø–æ–ª—å–æ—Ç—É –ª—ñ—Ç–∞–∫–æ–º + –∞–µ—Ä–æ–ø–æ—Ä—Ç)
international_flights = [
    ("–ö–∏—ó–≤", "–ü–∞—Ä–∏–∂", 3), ("–ö–∏—ó–≤", "–õ–æ–Ω–¥–æ–Ω", 3), ("–õ—å–≤—ñ–≤", "–ü–∞—Ä–∏–∂", 2),
    ("–ü–∞—Ä–∏–∂", "–õ–æ–Ω–¥–æ–Ω", 1), ("–ü–∞—Ä–∏–∂", "–ù—å—é-–ô–æ—Ä–∫", 8), ("–õ–æ–Ω–¥–æ–Ω", "–ù—å—é-–ô–æ—Ä–∫", 7),
    ("–û–¥–µ—Å–∞", "–ú–∞—Ä—Å–µ–ª—å", 3)
]

# –î–æ–¥–∞—î–º–æ —Ä–µ–±—Ä–∞ –¥–æ –≥—Ä–∞—Ñ–∞
G.add_weighted_edges_from(ukraine_roads + france_roads + england_roads + usa_roads + international_flights)

# –ö–æ–ª—å–æ—Ä–∏ –¥–ª—è –≤–µ—Ä—à–∏–Ω
color_map = []
for node in G.nodes():
    if node in ukraine:
        color_map.append('#FFD700')
    elif node in france:
        color_map.append('#0055A4')
    elif node in england:
        color_map.append('#2D9D2E')
    elif node in usa:
        color_map.append('#B22234')

# –í—ñ–∑—É–∞–ª—ñ–∑–∞—Ü—ñ—è
plt.figure(figsize=(18, 10))
pos = scaled_coordinates

nx.draw_networkx_edges(G, pos, width=2, alpha=0.6, edge_color='gray')
nx.draw_networkx_nodes(G, pos, node_color=color_map, node_size=3000, edgecolors='black', linewidths=2)
nx.draw_networkx_labels(G, pos, font_size=11, font_weight='bold')

edge_labels = nx.get_edge_attributes(G, 'weight')
nx.draw_networkx_edge_labels(G, pos, edge_labels, font_size=9)

plt.title('RPG World Map - –¢—Ä–∞–Ω—Å–ø–æ—Ä—Ç–Ω–∞ –º–µ—Ä–µ–∂–∞', fontsize=16, fontweight='bold')
plt.axis('off')
plt.tight_layout()
plt.show()

# –ê–Ω–∞–ª—ñ–∑ –æ—Å–Ω–æ–≤–Ω–∏—Ö —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫ –≥—Ä–∞—Ñ–∞
print("\nüìä –ê–ù–ê–õ–Ü–ó –û–°–ù–û–í–ù–ò–• –•–ê–†–ê–ö–¢–ï–†–ò–°–¢–ò–ö –ì–†–ê–§–ê:\n")
print(f"–ö—ñ–ª—å–∫—ñ—Å—Ç—å –≤–µ—Ä—à–∏–Ω (–º—ñ—Å—Ç): {G.number_of_nodes()}")
print(f"–ö—ñ–ª—å–∫—ñ—Å—Ç—å —Ä–µ–±–µ—Ä (–º–∞—Ä—à—Ä—É—Ç—ñ–≤): {G.number_of_edges()}")
print(f"\nüîó –°—Ç—É–ø—ñ–Ω—å –∫–æ–∂–Ω–æ—ó –≤–µ—Ä—à–∏–Ω–∏ (–∫—ñ–ª—å–∫—ñ—Å—Ç—å –∑'—î–¥–Ω–∞–Ω—å):")
for node in sorted(G.degree(), key=lambda x: x[1], reverse=True):
    print(f"  {node[0]}: {node[1]} –∑'—î–¥–Ω–∞–Ω—å")

print(f"\nüìà –°–µ—Ä–µ–¥–Ω—ñ–π —Å—Ç—É–ø—ñ–Ω—å –≤–µ—Ä—à–∏–Ω–∏: {sum(dict(G.degree()).values()) / G.number_of_nodes():.2f}")